"use strict";(function(b,d){var j=function j(){};j.version="1.0.0 alpha";j.create=function g(m){m=m||{};var k=m.root||"framework";var l=new j();l.version=m.version||"1.0.0";l.fullName=m.fullName||"framework";l.privateMemberPrefix=m.privateMemberPrifix||"_";l.defaultBaseClass=m.defaultBaseClass||Object;return l};var h=j.prototype;var a=h;j.register=function(k,l){if(h[k]!==d){throw new Error("Member already registered.")}h[k]=l};b.FrameworkFactory=j;Object.create=Object.create||function(l){function k(){}k.prototype=l;return new k()};Object.getPrototypeOf=Object.getPrototypeOf||function(){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(k){return k.__proto__}}else{Object.getPrototypeOf=function(k){return k.constructor.prototype}}};Array.prototype.indexOf=Array.prototype.indexOf||function(m,n){for(var l=(n||0),k=this.length;l<k;l+=1){if(this[l]===m){return l}}return -1};String.trim=String.trim||function(k){return k.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};h.utils={getPrivateKey:function(k){return"_"+k},getProtectedKey:function(k){return"__"+k},clone:function(l,k){k=k||false;throw new Error("Not implemented error.")},set:function(r,n,l){l=l||{};var k=l.setFunctions||false;for(var m in n){if(n.hasOwnProperty[m]===false){continue}if(r[m]===d){continue}var q=typeof r[m];var p=n[m];switch(q){case"object":if(r[m].constructor.set!==d){r[m].constructor.set(r[m],n[m])}else{if(r[m] instanceof Array){r[m].push.apply(r[m],p)}else{h.Utils.set(r[m],p)}}break;case"function":if(k===true){r[m]=p}default:r[m]=p}}},isFunction:function(k){return typeof k==="function"},isNumber:function(k){return typeof k==="number"},isUndefined:function(k){return typeof k==="undefined"},isString:function(k){return typeof val==="string"},isDate:function(k){return(typeof k==="object")&&(k instanceof Date===true)},simpleGuid:function(k){function l(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l())}};a.Class=function(k,s){var q=/xyz/.test(function(){xyz})?/\$\bsuper\b/:/.*/,p=Object.prototype.hasOwnProperty,m,n,t,l,u,r;r=this;s=s||r.defaultBaseClass;k=k||{};m=true;n=new s;m=false;l=function l(){if(!(this instanceof l)){throw Error("Class used as function.")}if(m===false&&this["init"]!==d){this.init.apply(this,arguments)}};for(t in s){if(p.call(s,t)){l[t]=s[t]}}u=s.prototype;l.prototype=n;l.prototype.constructor=l;l.__super__=u;l.attach=function o(A){for(t in A){if(!p.call(A,t)){continue}var w=A[t];var v=typeof w;var y=w;var z=false;if(v==="object"&&w.type!==d){var x=h.TypeHandlers[w.type];if(x!==d){x(l,t,w);z=true}}else{if(v==="function"&&typeof u[t]==="function"&&q.test(w)){n[t]=(function(B,C){return function(){this.$super=function(){u[B].apply(this,arguments)};var D=C.apply(this,arguments);delete this.$super;return D}})(t,w);z=true}}if(!z){n[t]=y}l.__meta__[t]=w}};l.__meta__={};l.attach(k);return l};a.TypeHandlers={};a.event=function(){return{type:"framework.event"}};var e=function(l,n,m){var o=l.prototype;var q=l.__super__;var p=a.utils.getPrivateKey(n);var k;var k=function k(r){if(this[p]===d){this[p]=[]}this[p].push(r)};o[n]=k;if(o.on===d){o.on=function(w,t){var v=w.split(",");for(var s=0,u=v.length;s<u;s++){var r=String.trim(v[s]);if(this[r]!==d){this[r](t)}}};o.trigger=function(t,v){var x=this[p];v=v||{};v.eventName=t;for(var w=0,r=x.length;w<r;w++){var u=x[w](this,v);if(u===false){break}}return this};o.off=function(s,u){var r=this[a.utils.getPrivateKey(s)];var t=r.indexOf(u);if(t!==-1){r.splice(t,1)}}}};a.TypeHandlers["framework.event"]=e;h.attribute=function(k,l){return{type:"framework.attribute",defaultValue:k,options:l}};a.attr=h.attribute;var c=function(k,m,l){var n=k.prototype;var p=k.__super__;var o=h.utils.getPrivateKey(m);n[m]=l.defaultValue};a.TypeHandlers["framework.attribute"]=c;a.collections={};var f=a.collections;f.ObservableList=a.Class({},Object);f.MapList=a.Class({length:0,keyName:"id",init:function(){this._items=[];this._keys=[];this._map={};if(arguments.length>0){this.add.apply(this,arguments)}},add:function(){var l=this._items,q=this._keys,r=this._map,o=this.keyName,p,n;for(var m=0,k=arguments.length;m<k;m++){p=arguments[m];if(typeof p==="object"&&p[o]!==d){n=p[o];if(typeof n==="function"){n=n()}if(n!==d){if(r[n]!==d){throw new Error("Item with this key already exists.")}q.push(n);r[n]=p}}this.length=l.push(p)}return this},addList:function(){var n=arguments[0];if(n instanceof Array){this.add.apply(this,n)}var l=[];for(var m=0,k=arguments.length;m<k;m++){l.push(n[m].get(m))}this.add.apply(this,l)},get:function(k){if(typeof k==="number"){return this._items[k]}return this._map[k]},replace:function(o,n){var l,m,k;k=this.findIndexKey(o);l=k[0];m=k[1];if(l!=-1){this._items[l]=n}if(m!==d){this.map[m]=n}},findIndexKey:function(m){var k,l;if(typeof m==="number"){k=m;l=this._keys[k]}else{k=this._keys.indexOf(m);l=m}if(k<0||k>=this.length){throw new Error("Index out of range.")}return[k,l]},findIndexKeyByItem:function(l){var k=this._items.indexOf(l);return findIndexKey(k)},remove:function(n){var k=this.findIndexKey(n),l=k[0],m=k[1];if(l<0){this._items.splice(l,1);this._keys.splice(l,1)}if(m!==d){delete this._map[m]}return this},findKeyOrIndex:function(k){if(typeof k==="number"){return this.keys[this.keyName]}return this._keys.indexOf(k)},clear:function(){this._items=[];this._keys=[];this._map={}},indexOf:function(k){return this._items.indexOf(k)},toArray:function(){return this._items},each:function(n){var l,m,k;l=this._items;for(m=0,k=l.length;m<k;m++){n(l[m])}return this}},Object);f.MapList.set=function i(l,k){if(l instanceof f.MapList===false){throw new Error('Operation "set" not supported on this object.')}l.clear();if(k instanceof Array||k instanceof f.MapList){l.add.apply(l,k)}else{l.add(k)}};f.ObservableMapList=a.Class({itemBeforeAdd:a.event(),itemAdded:a.event(),itemBeforeRemove:a.event(),itemRemoved:a.event(),itemBeforeSet:a.event(),itemSet:a.event(),init:function(){this._list=new f.MapList();_list.add.apply(_list,arguments)}},Object);j.plugin=function(k){k.call(b,a)};return j})(this);