(function(c,e){var l=function l(m){m=m||{};this.version=m.version||"1.0.0";this.rootNamespace=m.root||"framework";this.fullName=m.fullName||"framework";this.defaultBaseClass=m.defaultBaseClass||Object;this.privatePrefix=m.privatePrefix||"_";this.protectedPreix=m.privatePrefix||"_"};var k={};k.version="1.0.0 alpha";k.create=function h(n){var m=new l(n);return m};var a=l.prototype;var i=a;k.register=function(m,n){if(i[m]!==e){throw new Error("Member already registered.")}i[m]=n};c.FrameworkFactory=k;Object.create=Object.create||function(n){function m(){}m.prototype=n;return new m()};Object.getPrototypeOf=Object.getPrototypeOf||function(){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(m){return m.__proto__}}else{Object.getPrototypeOf=function(m){return m.constructor.prototype}}};Array.prototype.indexOf=Array.prototype.indexOf||function(o,p){for(var n=(p||0),m=this.length;n<m;n+=1){if(this[n]===o){return n}}return -1};String.trim=String.trim||function(m){return m.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};i.utils={equals:function(o,n){var m;if(o===n){return true}for(m in o){if(n[m]===e){return false}var q=o[m];var p=n[m];if(q!==p){return false}}for(m in n){if(o[m]===e){return false}}return true},clone:function(n,m){m=m||false;throw new Error("Not implemented error.")},loadFromJSON:function(t,q,n){n=n||{};var m=n.setFunctions||false;for(var p in q){if(q.hasOwnProperty[p]===false){continue}var s=typeof t[p];var r=q[p];switch(s){case"object":if(t[p].constructor.loadFromJSON!==e){t[p].constructor.loadFromJSON(t,p,r)}else{if(t[p] instanceof Array){t[p]=r}else{i.Utils.loadFromJSON(t[p],r)}}break;case"function":if(t[p].loadFromJSON!==e){t[p].loadFromJSON(t,p,r)}else{t[p]=r}break;default:t[p]=r}}},exportToJSON:function f(n){var m={};for(key in n){}},isFunction:function(m){return typeof m==="function"},isNumber:function(m){return typeof m==="number"},isUndefined:function(m){return typeof m==="undefined"},isString:function(m){return typeof val==="string"},isDate:function(m){return(typeof m==="object")&&(m instanceof Date===true)},simpleGuid:function(m){function n(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n())},emptyFn:function(){},"undefined":e};a.Class=function(m,u){var s=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/,r=Object.prototype.hasOwnProperty,o,p,v,n,w,t;t=this;u=u||t.defaultBaseClass;m=m||{};o=true;p=new u;o=false;n=function n(){if(!(this instanceof n)){throw Error("Class used as function.")}if(o===false&&this["init"]!==e){this.init.apply(this,arguments)}};for(v in u){if(r.call(u,v)){n[v]=u[v]}}w=u.prototype;n.prototype=p;n.prototype.constructor=n;n.__super__=w;n.attach=function q(C){for(v in C){if(!r.call(C,v)){continue}var y=C[v];var x=typeof y;var A=y;var B=false;if(x==="object"&&y.type!==e){var z=i.TypeHandlers[y.type];if(z!==e){z(n,v,y);B=true}}else{if(x==="function"&&typeof w[v]==="function"&&s.test(y)){p[v]=(function(D,E){return function(){this.base=function(){w[D].apply(this,arguments)};var F=E.apply(this,arguments);delete this.base;return F}})(v,y);B=true}}if(!B){p[v]=A}n.__meta__[v]=y}};n.__meta__={};n.attach(m);return n};a.TypeHandlers={};(function(m,o,p){m.event=function(){return{type:"framework.event"}};var n=function(q,s,r){var t=q.prototype;t[s]=function(u){var v="_"+s;if(this[v]===p){this[v]=[]}this[v].push(u)};t[s].loadFromJSON=function(x,w,u){x[w].call(x,u)};if(t.on===p){t.on=function(z,w){var y=z.split(" ");for(var v=0,x=y.length;v<x;v++){var u=String.trim(y[v]);if(this[u]!==p){this[u](w)}}};t.trigger=function(v,x){var z=this["_"+v];if(z===p||z.length===0){return this}x=x||{};x.eventName=v;for(var y=0,u=z.length;y<u;y++){var w=z[y](this,x);if(w===false){break}}return this};t.off=function(v,x){var u=this["_"+v];var w=u.indexOf(x);if(w!==-1){u.splice(w,1)}}}};m.TypeHandlers["framework.event"]=n})(i,c);i.attribute=function(m,n){return{type:"framework.attribute",defaultValue:m,options:n}};a.attr=i.attribute;var b=function(m,o,n){var p=m.prototype;var q="_"+o;p[o]=n.defaultValue};a.TypeHandlers["framework.attribute"]=b;(function(n,p,r){var q=function q(s,t){t=t||{};return{type:"framework.property",defaultValue:s,readonly:false,silent:t.silent||false,get:t.get,set:t.set}},m=function m(s,t){t=t||{};return{type:"framework.readonly",defaultValue:s,readonly:true,silent:false,get:t.get}},o=function(t,E,F){var x=t.prototype,w,s,y=F.readonly,A=F.silent||false,C=F.get,v=F.set,B="_"+E;x[B]=F.defaultValue;if(y===false&&A===false){if(x.propertyChanged===r){t.attach({propertyChanging:n.event(),propertyChanged:n.event()})}}w=C||function u(){return this[B]};if(v!==r){if(A){s=v}else{s=function(H){var G=this[E];if(G===H){return}var I={propertyName:E,oldValue:G,newValue:H};this.trigger("propertyChanging",I);v.call(this,H);this.trigger("propertyChanged",I)}}}else{if(y===true){s=function z(){throw new Error('You are not allowed to write to readonly attribute "'+E+'".')}}else{if(A){s=function(G){this[B]=G}}else{s=function D(H){var G=this[B];if(G===H){return}var I={propertyName:E,oldValue:G,newValue:H};this.trigger("propertyChanging",I);this[B]=H;this.trigger("propertyChanged",I)}}}}if(Object.defineProperty){Object.defineProperty(x,E,{get:w,set:s})}else{if(x.__defineGetter__!==r){x.__defineGetter__(E,w);x.__defineSetter__(E,s)}}};n.TypeHandlers["framework.property"]=o;n.TypeHandlers["framework.readonly"]=o;n.property=q;n.readonly=m})(i,c);a.collections={};var g=a.collections;g.ObservableList=a.Class({},Object);g.MapList=a.Class({length:a.readonly(0),keyName:"id",validator:e,itemBeforeAdd:a.event(),itemAdd:a.event(),itemBeforeRemove:a.event(),itemRemoved:a.event(),itemBeforeSet:a.event(),itemSet:a.event(),init:function(){this._items=[];this._keys=[];this._map={};if(arguments.length>0){this.add.apply(this,arguments)}},add:function(){var q=this._items,t=this._keys,m=this._map,s=this.keyName,u,r;for(var n=0,o=arguments.length;n<o;n++){u=arguments[n];var p={item:u,act:true};this.trigger("itemBeforeAdd",p);if(p.act===false){continue}if(typeof u==="object"&&u[s]!==e){r=u[s];if(typeof r==="function"){r=r()}if(r!==e){if(m[r]!==e){throw new Error("Item with this key ["+r+"] already exists.")}t.push(r);m[r]=u}}this._length=q.push(u);this.trigger("itemAdd",{item:u})}return this},addList:function(){var p=arguments[0];if(p instanceof Array){this.add.apply(this,p)}var n=[];for(var o=0,m=arguments.length;o<m;o++){n.push(p[o].get(o))}this.add.apply(this,n)},get:function(m){if(typeof m==="number"){return this._items[m]}return this._map[m]},replace:function(q,p){var n,o,m;m=this.findIndexKey(q);n=m[0];o=m[1];if(n!=-1){this._items[n]=p}if(o!==e){this.map[o]=p}},findIndexKey:function(o){var m,n;if(typeof o==="number"){m=o;n=this._keys[m]}else{m=this._keys.indexOf(o);n=o}if(m<0||m>=this.length){throw new Error("Index ["+m.toString()+"] out of range.")}return[m,n]},findIndexKeyByItem:function(n){var m=this._items.indexOf(n);return findIndexKey(m)},remove:function(p){var m=this.findIndexKey(p),n=m[0],o=m[1];if(n<0){this._items.splice(n,1);this._keys.splice(n,1)}if(o!==e){delete this._map[o]}return this},findKeyOrIndex:function(m){if(typeof m==="number"){return this.keys[this.keyName]}return this._keys.indexOf(m)},clear:function(){this._items=[];this._keys=[];this._map={}},indexOf:function(m){return this._items.indexOf(m)},toArray:function(){return this._items},each:function(q,p){var n,o,m;n=this._items;if(p===e){p=this}for(o=0,m=n.length;o<m;o++){q.call(p,n[o])}return this}},Object);g.MapList.loadFromJSON=function j(q,m,p){var n=q[m];if(n instanceof g.MapList===false){throw new Error('Operation "set" not supported on this object.')}n.clear();if(p instanceof Array||p instanceof g.MapList){n.add.apply(n,p)}else{if(p.$type!==e){}n.add(p)}};g.MapList.exportToJSON=function d(r){var o=[];var n=r.toArray();for(var p=0,m=r.length;p<m;p++){var q=n[p];o.push(a.utils.toJson(q))}return o};g.ObservableMapList=a.Class({itemBeforeAdd:a.event(),itemAdded:a.event(),itemBeforeRemove:a.event(),itemRemoved:a.event(),itemBeforeSet:a.event(),itemSet:a.event(),init:function(){this._list=new g.MapList();_list.add.apply(_list,arguments)},add:function(){}},g.MapList);k.plugin=function(m){m.call(c,a)};return k})(this);