(function(c,f){var m=function m(n){n=n||{};this.version=n.version||"1.0.0";this.rootNamespace=n.root||"framework";this.fullName=n.fullName||"framework";this.privateMemberPrefix=n.privateMemberPrifix||"_";this.protectedMemberPrifix=n.protectedMemberPrifix||"__";this.defaultBaseClass=n.defaultBaseClass||Object};var l={};l.version="1.0.0 alpha";l.create=function i(o){var n=new m(o);return n};var a=m.prototype;var j=a;l.register=function(n,o){if(j[n]!==f){throw new Error("Member already registered.")}j[n]=o};c.FrameworkFactory=l;Object.create=Object.create||function(p){function n(){}n.prototype=p;return new n()};Object.getPrototypeOf=Object.getPrototypeOf||function(){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(n){return n.__proto__}}else{Object.getPrototypeOf=function(n){return n.constructor.prototype}}};Array.prototype.indexOf=Array.prototype.indexOf||function(p,q){for(var o=(q||0),n=this.length;o<n;o+=1){if(this[o]===p){return o}}return -1};String.trim=String.trim||function(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};j.utils={getPrivateKey:function(n){return j.privateMemberPrefix+n},getProtectedKey:function(n){return framework.protectedMemberPrifix+n},equals:function(p,o){var n;if(p===o){return true}for(n in p){if(o[n]===f){return false}var r=p[n];var q=o[n];if(r!==q){return false}}for(n in o){if(p[n]===f){return false}}return true},clone:function(p,n){n=n||false;throw new Error("Not implemented error.")},loadFromJSON:function(u,r,p){p=p||{};var n=p.setFunctions||false;for(var q in r){if(r.hasOwnProperty[q]===false){continue}var t=typeof u[q];var s=r[q];switch(t){case"object":if(u[q].constructor.loadFromJSON!==f){u[q].constructor.loadFromJSON(u[q],r[q])}else{if(u[q] instanceof Array){u[q].push.apply(u[q],s)}else{j.Utils.loadFromJSON(u[q],s)}}break;case"function":if(n===true){u[q]=s}default:u[q]=s}}},exportToJSON:function g(p){var n={};for(key in p){}},isFunction:function(n){return typeof n==="function"},isNumber:function(n){return typeof n==="number"},isUndefined:function(n){return typeof n==="undefined"},isString:function(n){return typeof val==="string"},isDate:function(n){return(typeof n==="object")&&(n instanceof Date===true)},simpleGuid:function(n){function o(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o())},emptyFn:function(){},"undefined":f};a.Class=function(n,v){var t=/xyz/.test(function(){xyz})?/\$\bsuper\b/:/.*/,s=Object.prototype.hasOwnProperty,p,q,w,o,x,u;u=this;v=v||u.defaultBaseClass;n=n||{};p=true;q=new v;p=false;o=function o(){if(!(this instanceof o)){throw Error("Class used as function.")}if(p===false&&this["init"]!==f){this.init.apply(this,arguments)}};for(w in v){if(s.call(v,w)){o[w]=v[w]}}x=v.prototype;o.prototype=q;o.prototype.constructor=o;o.__super__=x;o.attach=function r(D){for(w in D){if(!s.call(D,w)){continue}var z=D[w];var y=typeof z;var B=z;var C=false;if(y==="object"&&z.type!==f){var A=j.TypeHandlers[z.type];if(A!==f){A(o,w,z);C=true}}else{if(y==="function"&&typeof x[w]==="function"&&t.test(z)){q[w]=(function(E,F){return function(){this.$super=function(){x[E].apply(this,arguments)};var G=F.apply(this,arguments);delete this.$super;return G}})(w,z);C=true}}if(!C){q[w]=B}o.__meta__[w]=z}};o.__meta__={};o.attach(n);return o};a.TypeHandlers={};a.event=function(){return{type:"framework.event"}};var e=function(o,q,p){var r=o.prototype;var t=o.__super__;var s=a.utils.getPrivateKey(q);var n;var n=function n(u){if(this[s]===f){this[s]=[]}this[s].push(u)};r[q]=n;if(r.on===f){r.on=function(z,w){var y=z.split(",");for(var v=0,x=y.length;v<x;v++){var u=String.trim(y[v]);if(this[u]!==f){this[u](w)}}};r.trigger=function(v,x){var z=this[s];x=x||{};x.eventName=v;for(var y=0,u=z.length;y<u;y++){var w=z[y](this,x);if(w===false){break}}return this};r.off=function(v,x){var u=this[a.utils.getPrivateKey(v)];var w=u.indexOf(x);if(w!==-1){u.splice(w,1)}}}};a.TypeHandlers["framework.event"]=e;j.attribute=function(n,o){return{type:"framework.attribute",defaultValue:n,options:o}};a.attr=j.attribute;var b=function(n,p,o){var q=n.prototype;var s=n.__super__;var r=j.utils.getPrivateKey(p);q[p]=o.defaultValue};a.TypeHandlers["framework.attribute"]=b;a.collections={};var h=a.collections;h.ObservableList=a.Class({},Object);h.MapList=a.Class({length:0,keyName:"id",init:function(){this._items=[];this._keys=[];this._map={};if(arguments.length>0){this.add.apply(this,arguments)}},add:function(){var o=this._items,t=this._keys,u=this._map,r=this.keyName,s,q;for(var p=0,n=arguments.length;p<n;p++){s=arguments[p];if(typeof s==="object"&&s[r]!==f){q=s[r];if(typeof q==="function"){q=q()}if(q!==f){if(u[q]!==f){throw new Error("Item with this key already exists.")}t.push(q);u[q]=s}}this.length=o.push(s)}return this},addList:function(){var q=arguments[0];if(q instanceof Array){this.add.apply(this,q)}var o=[];for(var p=0,n=arguments.length;p<n;p++){o.push(q[p].get(p))}this.add.apply(this,o)},get:function(n){if(typeof n==="number"){return this._items[n]}return this._map[n]},replace:function(r,q){var o,p,n;n=this.findIndexKey(r);o=n[0];p=n[1];if(o!=-1){this._items[o]=q}if(p!==f){this.map[p]=q}},findIndexKey:function(p){var n,o;if(typeof p==="number"){n=p;o=this._keys[n]}else{n=this._keys.indexOf(p);o=p}if(n<0||n>=this.length){throw new Error("Index out of range.")}return[n,o]},findIndexKeyByItem:function(o){var n=this._items.indexOf(o);return findIndexKey(n)},remove:function(q){var n=this.findIndexKey(q),o=n[0],p=n[1];if(o<0){this._items.splice(o,1);this._keys.splice(o,1)}if(p!==f){delete this._map[p]}return this},findKeyOrIndex:function(n){if(typeof n==="number"){return this.keys[this.keyName]}return this._keys.indexOf(n)},clear:function(){this._items=[];this._keys=[];this._map={}},indexOf:function(n){return this._items.indexOf(n)},toArray:function(){return this._items},each:function(q){var o,p,n;o=this._items;for(p=0,n=o.length;p<n;p++){q(o[p])}return this}},Object);h.MapList.loadFromJSON=function k(o,n){if(o instanceof h.MapList===false){throw new Error('Operation "set" not supported on this object.')}o.clear();if(n instanceof Array||n instanceof h.MapList){o.add.apply(o,n)}else{if(n.$type!==f){}o.add(n)}};h.MapList.exportToJSON=function d(s){var p=[];var o=s.toArray();for(var q=0,n=s.length;q<n;q++){var r=o[q];p.push(a.utils.toJson(r))}return p};h.ObservableMapList=a.Class({itemBeforeAdd:a.event(),itemAdded:a.event(),itemBeforeRemove:a.event(),itemRemoved:a.event(),itemBeforeSet:a.event(),itemSet:a.event(),init:function(){this._list=new h.MapList();_list.add.apply(_list,arguments)}},Object);l.plugin=function(n){n.call(c,a)};return l})(this);