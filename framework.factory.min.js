"use strict";(function(b,d){var i=function i(){};i.version="1.0.0 alpha";i.create=function g(l){l=l||{};var j=l.root||"framework";var k=new i();k.version=l.version||"1.0.0";k.fullName=l.fullName||"framework";k.privateMemberPrefix=l.privateMemberPrifix||"_";k.defaultBaseClass=l.defaultBaseClass||Object;return k};var a=i.prototype;i.register=function(j,k){if(_framework[j]!==d){throw new Error("Member already registered.")}_framework[j]=k};b.FrameworkFactory=i;Object.create=Object.create||function(k){function j(){}j.prototype=k;return new j()};Object.getPrototypeOf=Object.getPrototypeOf||function(){if(typeof"test".__proto__==="object"){Object.getPrototypeOf=function(j){return j.__proto__}}else{Object.getPrototypeOf=function(j){return j.constructor.prototype}}};Array.prototype.indexOf=Array.prototype.indexOf||function(m,n){for(var l=(n||0),k=this.length;l<k;l+=1){if(this[l]===m){return l}}return -1};String.trim=String.trim||function(j){return j.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};_framework.utils={getPrivateKey:function(j){return"_"+j},getProtectedKey:function(j){return"__"+j},equals:function(l,k){var j;if(l===k){return true}for(j in l){if(k[j]===d){return false}var n=l[j];var m=k[j];if(n!==m){return false}}for(j in k){if(l[j]===d){return false}}return true},clone:function(k,j){j=j||false;throw new Error("Not implemented error.")},set:function(q,m,k){k=k||{};var j=k.setFunctions||false;for(var l in m){if(m.hasOwnProperty[l]===false){continue}if(q[l]===d){continue}var p=typeof q[l];var n=m[l];switch(p){case"object":if(q[l].constructor.set!==d){q[l].constructor.set(q[l],m[l])}else{if(q[l] instanceof Array){q[l].push.apply(q[l],n)}else{_framework.Utils.set(q[l],n)}}break;case"function":if(j===true){q[l]=n}default:q[l]=n}}},isFunction:function(j){return typeof j==="function"},isNumber:function(j){return typeof j==="number"},isUndefined:function(j){return typeof j==="undefined"},isString:function(j){return typeof val==="string"},isDate:function(j){return(typeof j==="object")&&(j instanceof Date===true)},simpleGuid:function(j){function k(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(k()+k()+"-"+k()+"-"+k()+"-"+k()+"-"+k()+k()+k())}};a.Class=function(j,r){var p=/xyz/.test(function(){xyz})?/\$\bsuper\b/:/.*/,o=Object.prototype.hasOwnProperty,l,m,s,k,t,q;q=this;r=r||q.defaultBaseClass;j=j||{};l=true;m=new r;l=false;k=function k(){if(!(this instanceof k)){throw Error("Class used as function.")}if(l===false&&this["init"]!==d){this.init.apply(this,arguments)}};for(s in r){if(o.call(r,s)){k[s]=r[s]}}t=r.prototype;k.prototype=m;k.prototype.constructor=k;k.__super__=t;k.attach=function n(z){for(s in z){if(!o.call(z,s)){continue}var v=z[s];var u=typeof v;var x=v;var y=false;if(u==="object"&&v.type!==d){var w=_framework.TypeHandlers[v.type];if(w!==d){w(k,s,v);y=true}}else{if(u==="function"&&typeof t[s]==="function"&&p.test(v)){m[s]=(function(A,B){return function(){this.$super=function(){t[A].apply(this,arguments)};var C=B.apply(this,arguments);delete this.$super;return C}})(s,v);y=true}}if(!y){m[s]=x}k.__meta__[s]=v}};k.__meta__={};k.attach(j);return k};a.TypeHandlers={};a.event=function(){return{type:"framework.event"}};var e=function(k,m,l){var n=k.prototype;var p=k.__super__;var o=a.utils.getPrivateKey(m);var j;var j=function j(q){if(this[o]===d){this[o]=[]}this[o].push(q)};n[m]=j;if(n.on===d){n.on=function(v,s){var u=v.split(",");for(var r=0,t=u.length;r<t;r++){var q=String.trim(u[r]);if(this[q]!==d){this[q](s)}}};n.trigger=function(r,u){var w=this[o];u=u||{};u.eventName=r;for(var v=0,q=w.length;v<q;v++){var t=w[v](this,u);if(t===false){break}}return this};n.off=function(r,t){var q=this[a.utils.getPrivateKey(r)];var s=q.indexOf(t);if(s!==-1){q.splice(s,1)}}}};a.TypeHandlers["framework.event"]=e;_framework.attribute=function(j,k){return{type:"framework.attribute",defaultValue:j,options:k}};a.attr=_framework.attribute;var c=function(j,l,k){var m=j.prototype;var o=j.__super__;var n=_framework.utils.getPrivateKey(l);m[l]=k.defaultValue};a.TypeHandlers["framework.attribute"]=c;a.collections={};var f=a.collections;f.ObservableList=a.Class({},Object);f.MapList=a.Class({length:0,keyName:"id",init:function(){this._items=[];this._keys=[];this._map={};if(arguments.length>0){this.add.apply(this,arguments)}},add:function(){var k=this._items,p=this._keys,q=this._map,n=this.keyName,o,m;for(var l=0,j=arguments.length;l<j;l++){o=arguments[l];if(typeof o==="object"&&o[n]!==d){m=o[n];if(typeof m==="function"){m=m()}if(m!==d){if(q[m]!==d){throw new Error("Item with this key already exists.")}p.push(m);q[m]=o}}this.length=k.push(o)}return this},addList:function(){var m=arguments[0];if(m instanceof Array){this.add.apply(this,m)}var k=[];for(var l=0,j=arguments.length;l<j;l++){k.push(m[l].get(l))}this.add.apply(this,k)},get:function(j){if(typeof j==="number"){return this._items[j]}return this._map[j]},replace:function(n,m){var k,l,j;j=this.findIndexKey(n);k=j[0];l=j[1];if(k!=-1){this._items[k]=m}if(l!==d){this.map[l]=m}},findIndexKey:function(l){var j,k;if(typeof l==="number"){j=l;k=this._keys[j]}else{j=this._keys.indexOf(l);k=l}if(j<0||j>=this.length){throw new Error("Index out of range.")}return[j,k]},findIndexKeyByItem:function(k){var j=this._items.indexOf(k);return findIndexKey(j)},remove:function(m){var j=this.findIndexKey(m),k=j[0],l=j[1];if(k<0){this._items.splice(k,1);this._keys.splice(k,1)}if(l!==d){delete this._map[l]}return this},findKeyOrIndex:function(j){if(typeof j==="number"){return this.keys[this.keyName]}return this._keys.indexOf(j)},clear:function(){this._items=[];this._keys=[];this._map={}},indexOf:function(j){return this._items.indexOf(j)},toArray:function(){return this._items},each:function(m){var k,l,j;k=this._items;for(l=0,j=k.length;l<j;l++){m(k[l])}return this}},Object);f.MapList.set=function h(k,j){if(k instanceof f.MapList===false){throw new Error('Operation "set" not supported on this object.')}k.clear();if(j instanceof Array||j instanceof f.MapList){k.add.apply(k,j)}else{k.add(j)}};f.ObservableMapList=a.Class({itemBeforeAdd:a.event(),itemAdded:a.event(),itemBeforeRemove:a.event(),itemRemoved:a.event(),itemBeforeSet:a.event(),itemSet:a.event(),init:function(){this._list=new f.MapList();_list.add.apply(_list,arguments)}},Object);i.plugin=function(j){j.call(b,a)};return i})(this);