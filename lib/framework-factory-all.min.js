/**
 * Framework Factory
 * http://framework-factory.com/
 *
 * Copyright (c) 2013 Maniar Technologies Private Limited
 * Author Mohamed Aamir Maniar
 * Licensed under the MIT license.
 * https://framework-factory.com/LICENSE-MIT
 *
 **/

Object.create=Object.create||function(t){"use strict";function e(){}return e.prototype=t,new e},Object.getPrototypeOf=Object.getPrototypeOf||function(){"use strict";Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype}},Array.prototype.indexOf=Array.prototype.indexOf||function(t,e){"use strict";for(var n=e||0,r=this.length;r>n;n+=1)if(this[n]===t)return n;return-1},String.trim=String.trim||function(t){"use strict";return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},function(t,e){"use strict";var n,r,i,o=[],u={},s={};n=function(){function t(){}return new t}(),s.node="undefined"!=typeof module&&"object"==typeof module.exports,s.node&&(module.exports=n),s.requirejs="undefined"!=typeof define&&"object"==typeof define.amd,s.requirejs&&define(function(){return n}),s.browser="undefined"!=typeof window&&"object"==typeof window.document,n.global=s.node?global:t,n.environment=s,n.version="1.0.0",n.create=function(t){var n,u,a,f,c={};if("string"==typeof t)c.name=t,c.version="1.0.0",n={};else{t=t||{},c.name=t.name||"framework",c.version=t.version||"1.0.0",n=c.root||{};for(f in t)t.hasOwnProperty(f)===!0&&f in c==!1&&(c[f]=t[f])}for(n.version=c.version,n.name=c.name,n.environment=s,n.config=function(t,n){return c[t]!==e?c[t]:n},n.config.set=function(){var t,e=arguments[0];if(1===arguments.length&&"object"==typeof e)for(t in e)e.hasOwnProperty(t)===!0&&(c[t]=e[t]);else 2===arguments.length&&(c[arguments[0]]=arguments[1])},r=0,i=o.length;i>r;r+=1){if(u=o[r],a=u.name,n[a]!==e)throw Error('Plugin with the name "'+u.name+'" already loaded.');"function"==typeof u?u(n):"object"==typeof u&&u.load(n)}return n},n.plugins={register:function(t){if("function"==typeof t||"object"==typeof t){if(t.name===e)throw Error("Missing plugin name.");return o.push(t),e}throw Error("Invalid plugin type.")},getNames:function(){var t,e,n,r=[];for(e=0,n=o.length;n>e;e+=1)t=o[e],r.push(t.name);return r},toArray:function(){return o.slice()}},n.typeHandlers={register:function(t){if("object"==typeof t)return u[t.type]=t,e;throw Error("Invalid typeHandler.")},get:function(t){return u[t]},getTypes:function(){var t,e=[];for(t in u)u.hasOwnProperty(t)&&e.push(t);return e}},t.FrameworkFactory=n}(this),function(t,e){"use strict";function n(n){var r={func:function(t){return"function"==typeof t||t instanceof Function==!0},string:function(t){return"string"==typeof t||t instanceof String==!0},number:function(t){return"number"==typeof t||t instanceof Number==!0},primitive:function(t){return r.string(t)||r.number(t)},undef:function(t){return t===e},nullOrUndef:function(t){return t===e||null===t},date:function(t){return t instanceof Date==!0},plainObject:function(t){return t===e||null===t?!1:"object"==typeof t&&t.constructor===Object},concreteObject:function(t){return(r.primitive(t)||r.date(t)||r.nullOrUndef(t)||r.array(t))===!1},array:function(t){return t instanceof Array},inBrowser:function(){return window!==e&&t===window}};n.is=r}var r=t.FrameworkFactory;r.plugins.register(n)}(this),function(t,e){"use strict";function n(t){var e,n,r,i,o=u.typeHandlers.getTypes();for(r=0,i=o.length;i>r;r+=1)e=o[r],n=u.typeHandlers.get(e),n.init&&n.init(t)}function r(t,n,r){var i,o;r=r===e?!0:r;for(i in t)t.hasOwnProperty(i)&&(o=t[i],r?n[i]=o:i in n==!1&&(n[i]=o))}function i(t){var e=t.__meta__,n={};t.__super__.constructor.__meta__&&r(t.__super__.constructor.__meta__,n),r(n,e,!1)}function o(t){var r,o=!0,s=/xyz/.test(function(){})?/\bbase\b/:/.*/,a=t.config("defaultBaseClass"),f=t.config("requireNew",!1);r=function(r,c){var p,l,y,h,g=m.prototype.hasOwnProperty,d=!1;t[a]!==e?(c=c||t[a],d=!0):c=c||m,r=r||{},o=!0,p=new c,o=!1,y=f?function m(){if(this instanceof y==!1)throw Error("Class used as function.");o===!1&&this.init!==e&&this.init.apply(this,arguments)}:function m(){var t=o,n=null;return this instanceof y==!1?(o=!0,n=new y,o=t,o===!1&&n.init!==e&&n.init.apply(n,arguments),n):(o===!1&&this.init!==e&&this.init.apply(this,arguments),e)};for(l in c)g.call(c,l)&&(y[l]=c[l]);return h=c.prototype,y.prototype=p,y.prototype.constructor=y,y.__super__=h,y.attach=function(n){var r,o,a,f,c,l;for(c in n)g.call(n,c)&&(r=n[c],o=typeof r,a=r,f=!1,t.is.plainObject(r)?(l=u.typeHandlers.get(r.type).handler,l!==e&&(l(y,c,r),f=!0)):"function"===o&&"function"==typeof h[c]&&s.test(r)&&(p[c]=function(t,e){return function(){this.base=function(){h[t].apply(this,arguments)};var n=e.apply(this,arguments);return delete this.base,n}}(c,r),f=!0),f||(p[c]=a),y.__meta__[c]=r);i(y)},y.__meta__={},n(y),y.attach(r),y},t.Class=r}var u=t.FrameworkFactory;o.info={name:"classes"},u.plugins.register(o)}(this),function(t){"use strict";function e(t){var e=function(t){return{type:"attribute",defaultValue:t}};t.attribute=e,t.attr=e,n.typeHandlers.register({type:"attribute",handler:function(t,e,n){var r=t.prototype;r[e]=n.defaultValue}})}var n=t.FrameworkFactory;e.info={name:"attributes"},n.plugins.register(e)}(this),function(t,e){"use strict";function n(t){t.event=function(){return{type:"event"}},r.typeHandlers.register({type:"event",init:function(n){var r=n.prototype;r.on=function(n,r){var i,o,u,s,a=n.toLowerCase().split(" ");if(!t.is.func(r))throw Error("Only functions can be registered as event handler");for(i=0,o=a.length;o>i;i+=1)u=String.trim(a[i]),s="_"+u,this[s]===e&&(this[s]=[]),this[s].push(r);return this},r.trigger=function(t,n){var r,i,o=this["_"+t.toLowerCase()];if(o===e||0===o.length)return this;for(n=n||{},n.eventName=t,i=0;o.length>i&&(r=o[i],r.call(this,n)!==!1);i+=1);return this},r.off=function(t,n){var r,i=this["_"+t.toLowerCase()];if(i!==e)return r=i.indexOf(n),-1!==r&&i.splice(r,1),this},r.subscribers=function(t){return this["_"+t.toLowerCase()]||[]}},handler:function(t,e){var n=t.prototype;n[e]=function(t){return this.on(e,t),this},n[e].importObject=function(t,e,n){t[e].call(t,n)}}})}var r=t.FrameworkFactory;r.plugins.register(n)}(this),function(t,e){"use strict";function n(t){function n(t,n,r,i){if(i=i||function(){throw Error('Cannot assign to readonly property "'+n+'".')},Object.defineProperty)Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:r,set:i});else{if(t.__defineGetter__===e)throw Error("Properties are not supported in current environment.");t.__defineGetter__(n,r),t.__defineSetter__(n,i)}}var i,o,u;i=function i(n){var r,i;return t.is.plainObject(n)?(i=n.value,t.is.func(n.get)&&(r=n.get)):i=n,{type:"readonly",value:i,readonly:!0,get:r,set:e}},o=function o(e){var n,r,o;if(t.is.plainObject(e)){if(n=e.value,r=e.get,o=e.set,r&&!o)return i(e)}else n=e;return{type:"property",readonly:!1,value:n,get:r,set:o}},u=function(t,r,i){var o,u,s=t.prototype,a=i.readonly,f=i.get,c=i.set,p="_"+r,l=i.value;a?o=f!==e?f:function(){return this[p]}:(o=f||function(){return this[p]},u=c||function(t){this[p]=t}),l!==e&&(s[p]=l),n(s,r,o,u)},t.attachProperty=n,t.property=o,t.readonly=i,r.typeHandlers.register({type:"property",handler:u}),r.typeHandlers.register({type:"readonly",handler:u})}var r=t.FrameworkFactory;r.plugins.register(n)}(this),function(t,e){"use strict";function n(t,n,r,i){if(Object.defineProperty)Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:r,set:i});else{if(t.__defineGetter__===e)throw Error("Properties are not supported in current environment.");t.__defineGetter__(n,r),t.__defineSetter__(n,i)}}function r(t){i.typeHandlers.register({type:"observable",init:function(e){var n=e.prototype;n._previousVals={},n.set=function(){var t,e,n,r=arguments[0],i={};if(1===arguments.length&&"object"==typeof r)for(t in r)r.hasOwnProperty(t)===!0&&this[t]!==r[t]&&(e=this[t],n=r[t],this._previousVals[t]=e,this[t]=n,i[t]={oldValue:e,newValue:n});else 2===arguments.length&&(t=arguments[0],e=this[t],n=arguments[1],e!==n&&(this[t]=n,i[t]={oldValue:e,newValue:n}));return this.onChange(i),this},n.onChange=function(t){return this.trigger("change",{changed:t}),this},e.attach({change:t.event()})},handler:function(t,e,r){var i,o,u=t.prototype,s="_"+e;u[s]=r.value,i=function i(){return this[s]},o=function o(t){var n,r=this[s];r!==this[s]&&(this[s]=t,n={},n[e]={oldValue:r,newValue:t},this.onChange({changed:n}))},n(u,e,i,o)}})}var i=t.FrameworkFactory;i.plugins.register(r)}(this),function(t){"use strict";function e(t){t.clone=function(t){function e(t){var r,i,o;if(n.indexOf(t)>=0)return t;if(n.push(t),null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){for(r=[],i=0,o=t.length;o>i;i+=1)r[i]=e(t[i]);return r}if(t instanceof Object){r=new t.constructor;for(var u in t)t.hasOwnProperty(u)===!0&&(r[u]=e(t[u]));return r}throw Error("Unable to copy obj! Its type isn't supported.")}var n=[];return e(t)}}var n=t.FrameworkFactory;e.info={name:"clone",author:"Mohamed Aamir Maniar",version:"1.0"},e.toString=function(){return e.info.name},n.plugins.register(e)}(this),function(t,e){"use strict";function n(t){t.utils={equals:function(n,r){var i,o,u,s,a;if(n===r)return!0;for(i in n){if(r[i]===e)return!1;if(o=n[i],u=r[i],!t.is.func(i))if(t.is.primitive(o)){if(o instanceof Object){if(""+o!=""+u)return!1}else if(o!==u)return!1}else if(t.is.date(o)){if(o.getTime()!==u.getTime())return!1}else if(t.is.array(o)){for(s=0,a=o.length;a>s;s+=1)if(t.utils.equals(o[s],u[s])===!1)return!1}else if(t.utils.equals(o,u)===!1)return!1}for(i in r)if(n[i]===e)return!1;return!0},deepCopy:function(t){function e(t){var r,i,o;if(n.indexOf(t)>=0)return t;if(n.push(t),null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){for(r=[],i=0,o=t.length;o>i;i+=1)r[i]=e(t[i]);return r}if(t instanceof Object){r=new t.constructor;for(var u in t)t.hasOwnProperty(u)===!0&&(r[u]=e(t[u]));return r}throw Error("Unable to copy obj! Its type isn't supported.")}var n=[];return e(t)},importObject:function(n,r,i){i=i||{};var o;for(o in r)if(r.hasOwnProperty(o)===!0){var u=typeof n[o],s=r[o];switch(u){case"object":null===n[o]?n[o]=s:n[o].constructor.importObject!==e?n[o].constructor.importObject(n,o,s):n[o]instanceof Array?n[o]=s:t.utils.importObject(n[o],s);break;case"function":n[o].importObject!==e?n[o].importObject(n,o,s):n[o]=s;break;default:n[o]=s}}},simpleGuid:function(){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},emptyFn:function(){},undefined:e}}n.info={name:"utils"},n.toString=function(){return n.info.name},t.FrameworkFactory.plugins.register(n)}(this);