/**
 * framework-factory
 * http://framework-factory.com/
 *
 * Copyright (c) 2013 Maniar Technologies Private Limited
 * Author Mohamed Aamir Maniar
 * Licensed under the MIT license.
 * https://framework-factory.com/LICENSE-MIT
 *
 **/

Object.create=Object.create||function(t){"use strict";function e(){}return e.prototype=t,new e},Object.getPrototypeOf=Object.getPrototypeOf||function(){"use strict";Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype}},Array.prototype.indexOf=Array.prototype.indexOf||function(t,e){"use strict";for(var n=e||0,r=this.length;r>n;n+=1)if(this[n]===t)return n;return-1},String.trim=String.trim||function(t){"use strict";return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},function(t,e){"use strict";var n,r,o,i,u=[],a={};n=function(){function t(){}return new t}(),module!==e&&"object"==typeof module.exports?(i="node",module.exports=n):define!==e?(i="requirejs",define(function(){return n})):(i="browser",t.FrameworkFactory=n),n.global="node"===i?global:t,n.environment=i,n.version="1.0.0",n.create=function(t){var n,i,a,s,f={};if("string"==typeof t)f.name=t,f.version="1.0.0",n={};else{t=t||{},f.name=t.name||"framework",f.version=t.version||"1.0.0",n=f.root||{};for(s in t)t.hasOwnProperty(s)===!0&&s in f==!1&&(f[s]=t[s])}for(n.version=f.version,n.name=f.name,n.config=function(t,n){return f[t]!==e?f[t]:n},n.config.set=function(t){f[s]=t},r=0,o=u.length;o>r;r+=1){if(i=u[r],a=i.info.name,n[a]!==e)throw Error('Plugin with the name "'+i.name+'" already loaded.');"function"==typeof i&&(i(n),i.initialized=!0)}return n},n.plugins={register:function(t){if("function"==typeof t||"object"==typeof t)return u.push(t),e;throw Error("Invalid plugin type.")},getNames:function(){var t,e,n=[];for(t=0,e=u.length;e>t;t+=1)n.push(u[t].info.name);return n},toArray:function(){return u.slice()}},n.typeHandlers={register:function(t){if("object"==typeof t)return a[t.type]=t,e;throw Error("Invalid typeHandler.")},get:function(t){return a[t]},getTypes:function(){var t,e=[];for(t in a)a.hasOwnProperty(t)&&e.push(t);return e}},t.FrameworkFactory=n}(this),function(t,e){"use strict";function n(n){var r={func:function(t){return"function"==typeof t||t instanceof Function==!0},string:function(t){return"string"==typeof t||t instanceof String==!0},number:function(t){return"number"==typeof t||t instanceof Number==!0},primitive:function(t){return r.string(t)||r.number(t)},undef:function(t){return t===e},nullOrUndef:function(t){return t===e||null===t},date:function(t){return t instanceof Date==!0},plainObject:function(t){return t===e||null===t?!1:"object"==typeof t&&t.constructor===Object},concreteObject:function(t){return(r.primitive(t)||r.date(t)||r.nullOrUndef(t)||r.array(t))===!1},array:function(t){return t instanceof Array},inBrowser:function(){return window!==e&&t===window}};n.is=r}var r=t.FrameworkFactory;n.info={name:"is"},n.toString=function(){return n.info.name},r.plugins.register(n)}(this),function(t,e){"use strict";function n(t){var e,n,r,o,i=u.typeHandlers.getTypes();for(r=0,o=i.length;o>r;r+=1)e=i[r],n=u.typeHandlers.get(e),n.init&&n.init(t)}function r(t,n,r){var o,i;r=r===e?!0:r;for(o in t)t.hasOwnProperty(o)&&(i=t[o],r?n[o]=i:o in n==!1&&(n[o]=i))}function o(t){var e=t.__meta__,n={};t.__super__.constructor.__meta__&&r(t.__super__.constructor.__meta__,n),r(n,e,!1)}function i(t){var r,i=!0,a=/xyz/.test(function(){})?/\bbase\b/:/.*/,s=t.config("defaultBaseClass"),f=t.config("requireNew",!1);r=function(r,c){var p,l,y,g,h=v.prototype.hasOwnProperty,d=!1;t[s]!==e?(c=c||t[s],d=!0):c=c||v,r=r||{},i=!0,p=new c,i=!1,y=function v(){if(f&&this instanceof y==!1)throw Error("Class used as function.");if(f===!1&&this instanceof y==!1){var t=v.create(p);return i===!1&&t.init!==e&&t.init.apply(t,arguments),t}i===!1&&this.init!==e&&this.init.apply(this,arguments)};for(l in c)h.call(c,l)&&(y[l]=c[l]);return g=c.prototype,y.prototype=p,y.prototype.constructor=y,y.__super__=g,y.attach=function(n){var r,i,s,f,c,l;for(c in n)h.call(n,c)&&(r=n[c],i=typeof r,s=r,f=!1,t.is.plainObject(r)?(l=u.typeHandlers.get(r.type).handler,l!==e&&(l(y,c,r),f=!0)):"function"===i&&"function"==typeof g[c]&&a.test(r)&&(p[c]=function(t,e){return function(){this.base=function(){g[t].apply(this,arguments)};var n=e.apply(this,arguments);return delete this.base,n}}(c,r),f=!0),f||(p[c]=s),y.__meta__[c]=r);o(y)},y.__meta__={},n(y),y.attach(r),y},t.Class=r}var u=t.FrameworkFactory;i.toString=function(){return i.info.name},i.info={name:"classes"},u.plugins.register(i)}(this),function(t){"use strict";function e(t){var e=function(t){return{type:"attribute",defaultValue:t}};t.attribute=e,t.attr=e,n.typeHandlers.register({type:"attribute",handler:function(t,e,n){var r=t.prototype;r[e]=n.defaultValue}})}var n=t.FrameworkFactory;e.info={name:"attributes"},e.toString=function(){return e.info.name},n.plugins.register(e)}(this),function(t,e){"use strict";function n(t){t.event=function(){return{type:"event"}},r.typeHandlers.register({type:"event",init:function(n){var r=n.prototype;r.on=function(n,r){var o,i,u,a,s=n.toLowerCase().split(" ");if(!t.is.func(r))throw Error("Only functions can be registered as event handler");for(o=0,i=s.length;i>o;o+=1)u=String.trim(s[o]),a="_"+u,this[a]===e&&(this[a]=[]),this[a].push(r);return this},r.trigger=function(t,n){var r,o,i=this["_"+t.toLowerCase()];if(i===e||0===i.length)return this;for(n=n||{},n.eventName=t,o=0;i.length>o&&(r=i[o],r.call(this,n)!==!1);o+=1);return this},r.off=function(t,n){var r,o=this["_"+t.toLowerCase()];if(o!==e)return r=o.indexOf(n),-1!==r&&o.splice(r,1),this},r.event=function(t){return this["_"+t.toLowerCase()]||[]}},handler:function(t,e){var n=t.prototype;n[e]=function(t){return this.on(e,t),this},n[e].importObject=function(t,e,n){t[e].call(t,n)}}})}var r=t.FrameworkFactory;n.info={name:"events"},n.toString=function(){return n.info.name},r.plugins.register(n)}(this),function(t,e){"use strict";function n(t){function n(t,n,r,o){if(o=o||function(){throw Error('Can not assign to readonly property "'+n+'".')},Object.defineProperty)Object.defineProperty(t,n,{get:r,set:o});else{if(t.__defineGetter__===e)throw Error("Properties are not supported in current environment.");t.__defineGetter__(n,r),t.__defineSetter__(n,o)}}var o=function o(t){var n,r,o,i,u,a=!0;if("object"==typeof t)if(n=t.valueOf(),"object"!=typeof n&&"function"!=typeof n)r=t.value,o=t.get;else if(a=!1,r=t.value,t.get!==e&&t.set===e)u=!0,arguments[1]===!0&&(a=!0);else{if(t.get===e&&t.set===e)throw Error("Neither get nor set found in property declaration. This type of object is not currently supported.");o=t.get,i=t.set}else{if("function"==typeof t)throw Error("functions not supported as property default value.");r=t,arguments[1]===!0&&(a=!0)}return t=t||{},{type:"property",value:r,readonly:u,observable:a||!1,get:t.get,set:t.set}},i=function i(n){var r,o={};return t.is.plainObject(n)&&(o=n,n=o.value!==e?o.value:e,t.is.func(o.get)&&(r=o.get)),{type:"readonly",value:n,readonly:!0,observable:!1,get:r,set:e}},u=function(n,r,o){var i,u,a=n.prototype,s=o.readonly,f=o.observable||!1,c=o.get,p=o.set,l="_"+r,y=o.value,g={},h=r+"changing",d=r+"change";c!==e&&p===e?y!==e&&(a[l]=o.value):a[l]=o.value,g[h]=t.event(),g[d]=t.event(),n.attach(g),i=c||function(){return this[l]},u=s?function(){throw Error('You are not allowed to write to readonly property "'+r+'".')}:p!==e?f?function(t){var e,n=this[r];n!==t&&(e={propertyName:r,oldValue:n,newValue:t},this.trigger(h,e),p.call(this,t),this.trigger(d,e))}:p:f?function(t){var e,n=this[l];n!==t&&(e={propertyName:r,oldValue:n,newValue:t},this.trigger(h,e),this.onPropertyChanging&&this.onPropertyChanging(e),this[l]=t,this.trigger(d,e),this.onPropertyChanged&&this.onPropertyChanged(e))}:function(t){this[l]=t},Object.defineProperty?Object.defineProperty(a,r,{get:i,set:u}):a.__defineGetter__!==e&&(a.__defineGetter__(r,i),a.__defineSetter__(r,u))};t.attachProperty=n,t.property=o,t.readonly=i,r.typeHandlers.register({type:"property",handler:u}),r.typeHandlers.register({type:"readonly",handler:u})}var r=t.FrameworkFactory;n.info={name:"properties"},n.toString=function(){return n.info.name},r.plugins.register(n)}(this),function(t){"use strict";function e(t){t.clone=function(t){function e(t){var r,o,i;if(n.indexOf(t)>=0)return t;if(n.push(t),null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){for(r=[],o=0,i=t.length;i>o;o+=1)r[o]=e(t[o]);return r}if(t instanceof Object){r=new t.constructor;for(var u in t)t.hasOwnProperty(u)===!0&&(r[u]=e(t[u]));return r}throw Error("Unable to copy obj! Its type isn't supported.")}var n=[];return e(t)}}var n=t.FrameworkFactory;e.info={name:"clone",author:"Mohamed Aamir Maniar",version:"1.0"},e.toString=function(){return e.info.name},n.plugins.register(e)}(this),function(t,e){"use strict";function n(t){t.utils={equals:function(n,r){var o,i,u,a,s;if(n===r)return!0;for(o in n){if(r[o]===e)return!1;if(i=n[o],u=r[o],!t.is.func(o))if(t.is.primitive(i)){if(i instanceof Object){if(""+i!=""+u)return!1}else if(i!==u)return!1}else if(t.is.date(i)){if(i.getTime()!==u.getTime())return!1}else if(t.is.array(i)){for(a=0,s=i.length;s>a;a+=1)if(t.utils.equals(i[a],u[a])===!1)return!1}else if(t.utils.equals(i,u)===!1)return!1}for(o in r)if(n[o]===e)return!1;return!0},deepCopy:function(t){function e(t){var r,o,i;if(n.indexOf(t)>=0)return t;if(n.push(t),null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){for(r=[],o=0,i=t.length;i>o;o+=1)r[o]=e(t[o]);return r}if(t instanceof Object){r=new t.constructor;for(var u in t)t.hasOwnProperty(u)===!0&&(r[u]=e(t[u]));return r}throw Error("Unable to copy obj! Its type isn't supported.")}var n=[];return e(t)},importObject:function(n,r,o){o=o||{};var i;for(i in r)if(r.hasOwnProperty(i)===!0){var u=typeof n[i],a=r[i];switch(u){case"object":null===n[i]?n[i]=a:n[i].constructor.importObject!==e?n[i].constructor.importObject(n,i,a):n[i]instanceof Array?n[i]=a:t.utils.importObject(n[i],a);break;case"function":n[i].importObject!==e?n[i].importObject(n,i,a):n[i]=a;break;default:n[i]=a}}},simpleGuid:function(){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},emptyFn:function(){},undefined:e}}n.info={name:"utils"},n.toString=function(){return n.info.name},t.FrameworkFactory.plugins.register(n)}(this);